<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>黑神话：悟空小游戏</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: url('/Frame 3.png') no-repeat center center fixed;
            color: white;
            font-family: 'Arial', sans-serif;
        }
        
        .title {
            position: absolute;
            top: 20px;
            left: 50%-150px;
            font-size: 36px;
            color: #ffd700;
        }
        
        #gameCanvas {
            border: 2px solid #ffe11c;
            background-color: #2e2e2e;
        }
        
        .score-board {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            color: #ffd700;
        }
        
        .game-over-screen {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .game-over-screen button {
            background-color: #ffd700;
            border: none;
            color: black;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .game-over-screen button:hover {
            background-color: #ffcc00;
        }
    </style>
</head>

<body>
    <div class="score-board">分数: <span id="score">0</span></div>
    <div class="title">黑神话：吗喽</div>
    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <div class="game-over-screen" id="gameOverScreen">
        <h1>游戏结束</h1>
        <button id="restartButton">开始游戏</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const wukongImg = new Image();
        wukongImg.src = 'data:image/svg+xml;base64,' + btoa(`
 <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128" fill="none">
  <path d="M113.188 42.176C113.732 43.3649 114.009 44.6581 114.001 45.9653C113.992 47.2725 113.699 48.5622 113.14 49.744L110.66 54.988C109.48 58.4249 107.463 61.5137 104.791 63.9755C102.118 66.4372 98.874 68.1943 95.352 69.088C106.968 77.668 119.02 93.048 119.376 114.752C119.336 115.96 118.5 119.2 116 120H102C103.464 102.18 92.12 85.728 80.64 80.252L68.12 93.44C78.884 96.252 87.06 106.58 87.924 118C88.004 119.104 87.104 120 86 120H40.644C35.136 120.032 28 116.044 28 107.32V107.304C24.1788 107.107 20.4866 105.857 17.332 103.692C11.796 99.92 7.69598 93.312 7.93998 84.656C8.31998 71.16 15.912 63.612 22.1 58.08C22.6678 57.573 23.2371 57.0676 23.808 56.564C26.224 54.428 28.144 52.732 29.66 50.86C31.34 48.788 32.124 46.948 32.124 44.748C32.124 41.64 30.416 40.12 28.192 39.66C25.652 39.132 23.016 40.144 21.728 42.312C21.3587 42.9329 20.8707 43.475 20.292 43.9073C19.7132 44.3396 19.055 44.6537 18.3548 44.8316C17.6546 45.0095 16.9263 45.0478 16.2114 44.9442C15.4964 44.8407 14.8089 44.5973 14.188 44.228C13.5671 43.8587 13.025 43.3708 12.5927 42.792C12.1604 42.2132 11.8463 41.555 11.6684 40.8548C11.4905 40.1547 11.4522 39.4263 11.5558 38.7114C11.6593 37.9965 11.9027 37.3089 12.272 36.688C16.296 29.916 23.976 27.552 30.42 28.888C37.18 30.288 43.124 35.86 43.124 44.748C43.124 50.176 40.964 54.384 38.204 57.788C36.056 60.44 33.284 62.88 30.844 65.028L29.432 66.28C23.68 71.42 19.18 76.28 18.936 84.968C18.804 89.68 20.92 92.828 23.528 94.6C24.8527 95.529 26.3913 96.107 28 96.28V87.456C28.824 77.064 36.764 55.44 61.92 52.1C62.5936 52.0133 63.2733 51.9826 63.952 52.008L62.872 49.744C62.3085 48.5652 62.0114 47.2768 62.0018 45.9703C61.9921 44.6637 62.2701 43.3711 62.816 42.184L66.064 35.12C67.7758 31.2524 70.5741 27.9653 74.119 25.6582C77.6638 23.351 81.8025 22.1232 86.032 22.124H90C94.2434 22.1235 98.3949 23.3597 101.947 25.6812C105.499 28.0028 108.297 31.3092 110 35.196L113.188 42.176Z" fill="#6D4534"/>
  <path d="M105.876 37.9078C105.876 32.9918 101.892 29.0078 96.976 29.0078H79.056C74.14 29.0078 70.156 32.9918 70.156 37.9078V38.1878C70.156 41.3518 71.808 44.1318 74.3 45.7078C73.9809 47.6931 74.0967 49.724 74.6392 51.6602C75.1817 53.5964 76.138 55.3918 77.4422 56.9223C78.7464 58.4528 80.3672 59.6819 82.1928 60.5248C84.0184 61.3676 86.0052 61.8041 88.016 61.8041C90.0268 61.8041 92.0136 61.3676 93.8392 60.5248C95.6648 59.6819 97.2856 58.4528 98.5898 56.9223C99.8939 55.3918 100.85 53.5964 101.393 51.6602C101.935 49.724 102.051 47.6931 101.732 45.7078C103.001 44.9061 104.047 43.7961 104.772 42.4811C105.496 41.1662 105.876 39.6892 105.876 38.1878V37.9078ZM111.828 43.9518C111.828 40.7278 111.128 37.6638 109.868 34.9038C112.043 35.5027 113.97 36.7794 115.37 38.5484C116.77 40.3175 117.57 42.4867 117.652 44.7411C117.735 46.9954 117.098 49.2176 115.831 51.0847C114.565 52.9518 112.737 54.3667 110.612 55.1238C111.419 52.8092 111.83 50.3751 111.828 47.9238V43.9518ZM64.2 47.9198C64.2 50.4638 64.64 52.9038 65.436 55.1718C63.2777 54.4361 61.4139 53.0246 60.1208 51.1464C58.8278 49.2683 58.1744 47.0234 58.2575 44.7447C58.3405 42.466 59.1556 40.2747 60.5819 38.4956C62.0082 36.7165 63.9699 35.4444 66.176 34.8678C64.908 37.6358 64.204 40.7078 64.204 43.9518L64.2 47.9198ZM106 110C108.652 110 111.196 111.053 113.071 112.929C114.946 114.804 116 117.348 116 120H96C96 117.348 97.0536 114.804 98.9289 112.929C100.804 111.053 103.348 110 106 110ZM50 110C52.6522 110 55.1957 111.053 57.0711 112.929C58.9464 114.804 60 117.348 60 120H40C40 117.348 41.0536 114.804 42.9289 112.929C44.8043 111.053 47.3478 110 50 110Z" fill="#E39D89"/>
  <path d="M88.0161 59.8276C85.9114 59.8276 83.8928 58.9915 82.4045 57.5032C80.9163 56.0149 80.0802 53.9964 80.0802 51.8916H95.9521C95.9521 56.2756 92.4001 59.8276 88.0161 59.8276Z" fill="#BB1D80"/>
  <path d="M92.668 45.9398C92.668 44.7558 91.708 43.7998 90.528 43.7998H85.628C85.0604 43.7998 84.5161 44.0253 84.1148 44.4266C83.7134 44.8279 83.488 45.3722 83.488 45.9398C83.488 46.5074 83.7134 47.0517 84.1148 47.453C84.5161 47.8543 85.0604 48.0798 85.628 48.0798H90.528C91.0955 48.0798 91.6399 47.8543 92.0412 47.453C92.4425 47.0517 92.668 46.5074 92.668 45.9398Z" fill="#FF8687"/>
  <path d="M95.9199 37.8995C95.9199 37.3797 95.7134 36.8812 95.3459 36.5136C94.9783 36.146 94.4797 35.9395 93.9599 35.9395C93.4401 35.9395 92.9416 36.146 92.574 36.5136C92.2064 36.8812 91.9999 37.3797 91.9999 37.8995V42.0395C91.9999 42.5594 92.2064 43.0579 92.574 43.4255C92.9416 43.793 93.4401 43.9995 93.9599 43.9995C94.4797 43.9995 94.9783 43.793 95.3459 43.4255C95.7134 43.0579 95.9199 42.5594 95.9199 42.0395V37.8995ZM90.1919 47.6315C89.9304 47.6315 89.6796 47.5277 89.4947 47.3428C89.3098 47.1578 89.2059 46.907 89.2059 46.6455C89.2059 46.384 89.3098 46.1332 89.4947 45.9483C89.6796 45.7634 89.9304 45.6595 90.1919 45.6595C90.4534 45.6595 90.7042 45.7634 90.8891 45.9483C91.074 46.1332 91.1779 46.384 91.1779 46.6455C91.1779 46.907 91.074 47.1578 90.8891 47.3428C90.7042 47.5277 90.4534 47.6315 90.1919 47.6315ZM85.8759 47.6315C85.6144 47.6315 85.3636 47.5277 85.1787 47.3428C84.9938 47.1578 84.8899 46.907 84.8899 46.6455C84.8899 46.384 84.9938 46.1332 85.1787 45.9483C85.3636 45.7634 85.6144 45.6595 85.8759 45.6595C86.1374 45.6595 86.3882 45.7634 86.5731 45.9483C86.758 46.1332 86.8619 46.384 86.8619 46.6455C86.8619 46.907 86.758 47.1578 86.5731 47.3428C86.3882 47.5277 86.1374 47.6315 85.8759 47.6315ZM81.9599 35.9355C82.4797 35.9355 82.9783 36.142 83.3459 36.5096C83.7134 36.8772 83.9199 37.3757 83.9199 37.8955V42.0395C83.9199 42.5594 83.7134 43.0579 83.3459 43.4255C82.9783 43.793 82.4797 43.9995 81.9599 43.9995C81.4401 43.9995 80.9416 43.793 80.574 43.4255C80.2064 43.0579 79.9999 42.5594 79.9999 42.0395V37.8995C79.9999 37.6422 80.0506 37.3873 80.1491 37.1495C80.2476 36.9117 80.392 36.6956 80.574 36.5136C80.756 36.3316 80.9721 36.1872 81.2099 36.0887C81.4477 35.9902 81.7025 35.9355 81.9599 35.9355Z" fill="#1C1C1C"/>
</svg>`);

        const monsterImg = new Image();
        monsterImg.src = 'data:image/svg+xml;base64,' + btoa(`
  <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 512 512"><path fill="#8E6049" d="M374.151 335.414a7.227 7.227 0 0 0-9.318 4.191c-5.635 14.846-12.63 30.639-22.121 43.788c-.846-6.772-2.461-13.479-3.758-18.857c-.493-2.044-.959-3.976-1.107-4.89c-.64-3.938-4.355-6.608-8.29-5.974a7.227 7.227 0 0 0-5.974 8.29c.236 1.455.717 3.443 1.323 5.962c1.316 5.456 3.306 13.702 3.795 20.948c.526 7.777-.932 10.873-1.876 11.477a7.23 7.23 0 0 0-1.24 1.006c-8.395 6.348-18.204 10.626-29.778 11.723V302.972c0-16.123-13.073-29.211-29.203-29.211s-29.203 13.088-29.203 29.211v192.936c0 16.123 58.406 16.123 58.406 0V427.58c15.846-1.192 28.914-7.106 39.773-15.74c.276-.206.54-.422.799-.642c20.858-17.01 33.459-44.055 41.964-66.465a7.225 7.225 0 0 0-4.192-9.319"/><path fill="#2BA52E" d="M425.834 166.186a81.765 81.765 0 0 0-10.723-9.004a71.29 71.29 0 0 0 7.643-6.615c27.648-27.648 27.648-72.473 0-100.121c-27.528-27.528-72.078-27.637-99.754-.349a56.305 56.305 0 0 0-15.276-28.004c-22.101-22.101-57.934-22.101-80.036 0a56.682 56.682 0 0 0-8.123 10.272c-28.698-14.07-64.337-9.195-88.199 14.667c-27.576 27.576-29.802 70.878-6.721 101.019c-16.384 2.038-32.241 9.325-44.82 21.905c-30.023 30.023-30.023 78.699 0 108.721c15.196 15.196 35.171 22.687 55.087 22.5c-3.492 15.27.698 31.942 12.592 43.836c18.389 18.389 48.203 18.389 66.592 0a47.154 47.154 0 0 0 6.59-8.277c.277.286.539.582.822.865c29.47 29.47 77.249 29.47 106.719 0c10.028-10.028 16.635-22.178 19.838-35.003c26.93 6.874 56.689-.212 77.768-21.29c31.791-31.791 31.791-83.333.001-115.122"/><path fill="#8E6049" d="M254.365 411.485a7.213 7.213 0 0 1-3.015-.662c-34.656-15.938-80.328-43.021-76.842-93.966a7.226 7.226 0 0 1 14.416.986c-2.843 41.56 35.095 64.505 68.464 79.851a7.225 7.225 0 0 1-3.023 13.791"/></svg>`);


        const dino = {
            x: 50,
            y: canvas.height - 50,
            width: 50,
            height: 50,
            speedY: 0,
            jumping: false
        };

        let obstacles = [];
        let score = 0;
        let gameover = false;

        const maxJumpHeight = 100;

        function drawWukong() {
            ctx.drawImage(wukongImg, dino.x, dino.y, dino.width, dino.height);
        }

        function drawObstacles() {
            obstacles.forEach(obstacle => {
                ctx.drawImage(monsterImg, obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
        }

        function moveDino() {
            if (dino.jumping) {
                dino.y -= dino.speedY;
                dino.speedY -= 0.4;
                if (dino.y >= canvas.height - dino.height) {
                    dino.jumping = false;
                    dino.y = canvas.height - dino.height;
                }
            }
        }

        function jump() {
            if (!dino.jumping) {
                dino.speedY = 12;
                dino.jumping = true;
            }
        }

        function createObstacle() {
            const randomHeight = Math.random() * (maxJumpHeight - 20) + 20;
            const obstacle = {
                x: canvas.width,
                y: canvas.height - randomHeight,
                width: 40,
                height: randomHeight,
                speedX: 8
            };
            obstacles.push(obstacle);
        }

        function moveObstacles() {
            obstacles.forEach(obstacle => {
                obstacle.x -= obstacle.speedX;
                if (obstacle.x + obstacle.width <= 0) {
                    obstacles.shift();
                    score++;
                    document.getElementById('score').innerText = score;
                }
                if (collisionDetection(dino, obstacle)) {
                    gameover = true;
                }
            });
        }

        function collisionDetection(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                rect1.x + rect1.width > rect2.x &&
                rect1.y < rect2.y + rect2.height &&
                rect1.y + rect1.height > rect2.y;
        }

        function resetGame() {
            dino.x = 50;
            dino.y = canvas.height - 50;
            obstacles = [];
            score = 0;
            gameover = false;
            document.getElementById('gameOverScreen').style.display = 'none';
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawWukong();
            drawObstacles();

            if (gameover) {
                ctx.fillStyle = 'white';
                ctx.font = '30px Arial';

                document.getElementById('gameOverScreen').style.display = 'block';
                return; // 停止绘制游戏内容
            }
        }

        function update() {
            moveDino();
            moveObstacles();
            draw();
            if (!gameover) {
                requestAnimationFrame(update);
            }
        }

        document.addEventListener('keydown', (event) => {
            if (event.code === 'Space') {
                jump();
            }
        });

        document.getElementById('restartButton').addEventListener('click', () => {
            resetGame();
            update();
        });

        setInterval(createObstacle, 2000);

        update();
    </script>
</body>

</html>
